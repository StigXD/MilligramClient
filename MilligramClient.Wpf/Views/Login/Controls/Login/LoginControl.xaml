<UserControl x:Class="MilligramClient.Wpf.Views.Login.Controls.Login.LoginControl"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:converters="clr-namespace:MilligramClient.Common.Wpf.Converters;assembly=MilligramClient.Common.Wpf"
			 xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
			 xmlns:behaviors="clr-namespace:MilligramClient.Common.Wpf.Behaviors;assembly=MilligramClient.Common.Wpf"
			 xmlns:login="clr-namespace:MilligramClient.Wpf.Views.Login.Controls.Login"
			 xmlns:wpfControls="clr-namespace:MilligramClient.Common.Wpf.Controls;assembly=MilligramClient.Common.Wpf"
			 xmlns:helpers="clr-namespace:MilligramClient.Common.Wpf.Helpers;assembly=MilligramClient.Common.Wpf"
			 mc:Ignorable="d"
             d:DesignHeight="660"
             d:DesignWidth="500"
             d:DataContext="{d:DesignInstance login:LoginControlViewModel}">

	<UserControl.InputBindings>
		<KeyBinding Command="{Binding LoginCommand, Mode=OneWay}" Key="Enter" />
	</UserControl.InputBindings>

	<Grid>
		<StackPanel Margin="50,20">
			<TextBlock Margin="0,16,0,0"
                       FontSize="32"
                       Text="Вход" />
			<Grid Margin="0,16,0,10">
				<TextBox x:Name="EmailTextBox"
                         Padding="10,10"
                         FontSize="16"
                         Text="{Binding Email, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}">
					<i:Interaction.Behaviors>
						<behaviors:HandleFrameworkElementMouseMoveBehavior />
					</i:Interaction.Behaviors>
				</TextBox>
				<TextBlock Margin="12,0,0,0"
                           FontSize="16"
                           IsHitTestVisible="False"
                           Text="Ваш Email">
					<TextBlock.Style>
						<Style TargetType="{x:Type TextBlock}">
							<Setter Property="Visibility" Value="Hidden" />
							<Style.Triggers>
								<MultiDataTrigger>
									<MultiDataTrigger.Conditions>
										<Condition Binding="{Binding Email, Mode=OneWay}" Value="" />
										<Condition Binding="{Binding IsFocused, ElementName=EmailTextBox, Mode=OneWay}" Value="False" />
									</MultiDataTrigger.Conditions>
									<Setter Property="Visibility" Value="Visible" />
								</MultiDataTrigger>
							</Style.Triggers>
						</Style>
					</TextBlock.Style>
				</TextBlock>
				<Button Margin="0,0,8,0"
                        Focusable="False"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Stretch"
                        Foreground="{StaticResource MahApps.Brushes.IdealForeground}"
                        Command="{Binding CleanEmailCommand}"
                        Visibility="{Binding Email, Converter={converters:StringEmptyToVisibilityConverter UseHidden=True}, Mode=OneWay}">
					<iconPacks:PackIconMaterial Margin="3"
                                                Kind="Close" />
				</Button>
			</Grid>
			<Grid Margin="0,16,0,10">
				<PasswordBox x:Name="PasswordTextBox"
                             Padding="10,10"
                             FontSize="16"
                             helpers:PasswordHelper.Attach="True"
                             helpers:PasswordHelper.Password="{Binding Password, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}">
					<i:Interaction.Behaviors>
						<behaviors:HandleFrameworkElementMouseMoveBehavior />
					</i:Interaction.Behaviors>
				</PasswordBox>
				<TextBlock Margin="12,0,0,0"
                           FontSize="16"
                           IsHitTestVisible="False"
                           Text="Пароль">
					<TextBlock.Style>
						<Style TargetType="{x:Type TextBlock}">
							<Setter Property="Visibility" Value="Hidden" />
							<Style.Triggers>
								<MultiDataTrigger>
									<MultiDataTrigger.Conditions>
										<Condition Binding="{Binding Password, Mode=OneWay}" Value="" />
										<Condition Binding="{Binding IsFocused, ElementName=PasswordTextBox, Mode=OneWay}" Value="False" />
									</MultiDataTrigger.Conditions>
									<Setter Property="Visibility" Value="Visible" />
								</MultiDataTrigger>
							</Style.Triggers>
						</Style>
					</TextBlock.Style>
				</TextBlock>
			</Grid>

			<Button FontSize="16"
                    Margin="0,16,0,0"
                    Padding="10"
                    Command="{Binding LoginCommand, Mode=OneWay}"
                    Content="Логин" />
		</StackPanel>

		<Grid Background="#C4000000"
              Visibility="{Binding IsBusy, Mode=OneWay, Converter={converters:BoolToVisibilityConverter}}">
			<wpfControls:CircleSpinner HorizontalAlignment="Center"
                                       VerticalAlignment="Center" />
		</Grid>
	</Grid>
</UserControl>